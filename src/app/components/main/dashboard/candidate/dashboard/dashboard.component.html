<div class="flex flex-col md:flex-row min-h-screen bg-gray-100 dark:bg-gray-900">
  <!-- Sidebar - hidden on mobile by default, can be toggled -->
  <div *ngIf="mobileSidebarVisible" class="fixed inset-0 z-40 md:hidden" (click)="toggleMobileSidebar()">
    <div class="absolute inset-0 bg-gray-600 opacity-75"></div>
  </div>
  <app-sidebar
    [menuItems]="menuItems"
    [collapsed]="collapsed"
    (toggleCollapse)="toggleSidebar()"
    class="hidden md:block"
    [class.md:w-64]="!collapsed"
    [class.md:w-20]="collapsed"
  ></app-sidebar>

  <!-- Mobile sidebar overlay (for small screens) -->

  <!-- Mobile sidebar (for small screens) -->
  <div *ngIf="mobileSidebarVisible" class="fixed inset-y-0 left-0 z-50 w-64 bg-gray-800 md:hidden overflow-y-auto">
    <app-sidebar
      [menuItems]="menuItems"
      [collapsed]="false"
      class="h-full"
    ></app-sidebar>
  </div>

  <!-- Main Content Area -->
  <div class="flex-1 flex flex-col min-h-0 transition-all duration-300"
    [class.md:ml-20]="!collapsed"
    [class.md:ml-20]="collapsed"
  >
    <app-header
      [title]="'Candidate Dashboard'"
      (toggleSidebar)="toggleMobileSidebar()"
    ></app-header>

    <main class="flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-gray-800">
      <router-outlet></router-outlet>
      <div class="bg-gradient-to-r from-[#5FA8F5] via-[#3094FF] to-blue-600 text-white rounded-lg p-4 mb-4">
        <h2 class="text-xl md:text-2xl font-bold mb-2">
          Welcome, {{ user?.firstname }} {{ user?.lastname }}
        </h2>
        <p *ngIf="shortlistedCount > 0" class="opacity-90 text-sm">
          You have {{ shortlistedCount }} shortlisted applications. Keep it up!
        </p>
      </div>

      <!-- Stats Cards - Stack on mobile, 2 columns on tablet, 4 on desktop -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
        <div
          *ngFor="let stat of stats"
          class="bg-white dark:bg-gray-700 rounded-lg shadow p-4"
        >
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-500 dark:text-gray-300 text-xs font-medium">
                {{ stat.title }}
              </p>
              <h3 class="text-xl font-bold text-gray-800 dark:text-white mt-1">
                {{ stat.value }}
              </h3>
            </div>
            <div [class]="'rounded-full p-3 w-12 text-center ' + stat.color">
              <fa-icon [icon]="stat.icon" class="text-sm"></fa-icon>
            </div>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6">
        <div class="bg-white dark:bg-gray-700 rounded-lg shadow overflow-hidden">
          <div class="px-4 py-3 border-b border-gray-200 dark:border-gray-600">
            <h3 class="text-base font-semibold text-gray-800 dark:text-white">
              Your Recent Applications
            </h3>
          </div>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-600">
              <thead class="bg-gray-50 dark:bg-gray-600">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                    Job Title
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">
                    Status
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider hidden sm:table-cell">
                    Posted By
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider hidden md:table-cell">
                    JobType
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider hidden lg:table-cell">
                    Active
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white dark:bg-gray-700 divide-y divide-gray-200 dark:divide-gray-600">
                <tr *ngFor="let application of jobApplications | slice: 0:5" class="hover:bg-gray-50 dark:hover:bg-gray-600">
                  <td class="px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-white">
                    {{ application.job.jobTitle }}
                  </td>
                  <td class="px-3 py-2 whitespace-nowrap text-sm">
                    <span [class]="application.jobStatus === 'Shortlisted'
                      ? 'px-2 py-1 rounded-full text-green-300'
                      : application.jobStatus === 'Rejected'
                      ? 'px-2 py-1 rounded-full text-red-600'
                      : 'px-2 py-1 rounded-full text-yellow-300'">
                      {{ application.jobStatus }}
                    </span>
                  </td>
                  <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 hidden sm:table-cell">
                    {{ application.job.postedBy }}
                  </td>
                  <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 hidden md:table-cell">
                    {{ application.job.jobType }}
                  </td>
                  <td [class]="application.job.isActive === true
                    ? 'px-3 py-2 whitespace-nowrap text-sm text-green-500 dark:text-green-600 hidden lg:table-cell'
                    : 'px-3 py-2 whitespace-nowrap text-sm text-red-600 dark:text-red-600 hidden lg:table-cell'">
                    {{ application.job.isActive === true ? "Active" : "Closed" }}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="px-4 py-3 border-t border-gray-200 dark:border-gray-600 text-right">
            <a href="#" class="text-blue-600 dark:text-blue-400 hover:underline text-sm">
              View All Applications
            </a>
          </div>
        </div>

        <!-- Recent Jobs Table -->
        <div class="bg-white dark:bg-gray-700 rounded-lg shadow overflow-hidden">
          <div class="px-4 py-3 border-b border-gray-200 dark:border-gray-600">
            <h3 class="text-base font-semibold text-gray-800 dark:text-white">
              Recent Jobs
            </h3>
          </div>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-600">
              <thead class="bg-gray-50 dark:bg-gray-600">
                <tr>
                  <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    Job Title
                  </th>
                  <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden sm:table-cell">
                    Posted By
                  </th>
                  <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden md:table-cell">
                    JobType
                  </th>
                  <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider hidden lg:table-cell">
                    JobLevel
                  </th>
                  <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    Active
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white dark:bg-gray-700 divide-y divide-gray-200 dark:divide-gray-600">
                <tr *ngFor="let job of sortedJobs | slice: 0:5" class="hover:bg-gray-50 dark:hover:bg-gray-600">
                  <td class="px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-800 dark:text-white">
                    {{ job.jobTitle }}
                  </td>
                  <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 hidden sm:table-cell">
                    {{ job.postedBy }}
                  </td>
                  <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 hidden md:table-cell">
                    {{ job.jobType }}
                  </td>
                  <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300 hidden lg:table-cell">
                    {{ job.jobLevel }}
                  </td>
                  <td [class]="job.isActive === true
                    ? 'px-3 py-2 whitespace-nowrap text-sm text-green-500 dark:text-green-600'
                    : 'px-3 py-2 whitespace-nowrap text-sm text-red-600 dark:text-red-600'">
                    {{ job.isActive === true ? "Active" : "Closed" }}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="px-4 py-3 border-t border-gray-200 dark:border-gray-600 text-right">
            <a href="#" class="text-blue-600 dark:text-blue-400 hover:underline text-sm">
              View All Jobs
            </a>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>